<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="../../css/reset.css" />
		<link rel="stylesheet" type="text/css" href="../../css/custom.css" />
		<link rel="stylesheet" type="text/css" href="../../css/icon.css" />
		<link rel="stylesheet" type="text/css" href="../../css/public.css" />
		<link rel="stylesheet" type="text/css" href="../../css/layout.css" />
		<title>直购号</title>

		<style type="text/css">
			.page {
				top: 100px;
			}
		</style>
	</head>

	<body>
		<div class="list-container">
			<div class="header">
				<i class="iconfont icon-caidan--"></i>
				<a href="search.html" class="search-link tc">
					<i class="iconfont icon-sousuo-"></i>搜索关键字搜索商品
				</a>
			</div>
			<div class="sort-nav">
				<a href="javascript:;" class="item active">
					人气<i class="iconfont icon-up-1"></i>
				</a>
				<a href="javascript:;" class="item">
					销量<i class="iconfont icon-up-1"></i>
				</a>
				<a href="javascript:;" class="item">
					价格<i class="iconfont icon-up-1"></i>
				</a>
			</div>
		</div>
		<div class="page">
			<div class="list-container">
				<div class="seller-detail-wrapper">
					<div class="content">
						<ul id="proList" class="list">
							<li class="item-wrap">
								<a href="#" class="item">
									<div class="img-wrap">
										<img class="img lazyload" src="../../img/placehold_img.jpg" data-original="../../img/replace/shop_img.png" />
									</div>
									<div class="text">
										<div class="title over_1">喜释吐司喜释吐司喜释喜释吐司喜释吐司喜释</div>
										<div class="price">￥168.00</div>
										<span class="cart"></span>
									</div>
								</a>
							</li>
							<li class="item-wrap">
								<a href="#" class="item">
									<div class="img-wrap">
										<img class="img lazyload" src="../../img/placehold_img.jpg" data-original="../../img/replace/shop_img.png" />
									</div>
									<div class="text">
										<div class="title over_1">喜释吐司喜释吐司喜释喜释吐司喜释吐司喜释</div>
										<div class="price">￥168.00</div>
										<span class="cart"></span>
									</div>
								</a>
							</li>
							<li class="item-wrap">
								<a href="#" class="item">
									<div class="img-wrap">
										<img class="img lazyload" src="../../img/placehold_img.jpg" data-original="../../img/replace/shop_img.png" />
									</div>
									<div class="text">
										<div class="title over_1">喜释吐司喜释吐司喜释喜释吐司喜释吐司喜释</div>
										<div class="price">￥168.00</div>
										<span class="cart"></span>
									</div>
								</a>
							</li>
							<li class="item-wrap">
								<a href="#" class="item">
									<div class="img-wrap">
										<img class="img lazyload" src="../../img/placehold_img.jpg" data-original="../../img/replace/shop_img.png" />
									</div>
									<div class="text">
										<div class="title over_1">喜释吐司喜释吐司喜释喜释吐司喜释吐司喜释</div>
										<div class="price">￥168.00</div>
										<span class="cart"></span>
									</div>
								</a>
							</li>
							<li class="item-wrap">
								<a href="#" class="item">
									<div class="img-wrap">
										<img class="img lazyload" src="../../img/placehold_img.jpg" data-original="../../img/replace/shop_img.png" />
									</div>
									<div class="text">
										<div class="title over_1">喜释吐司喜释吐司喜释喜释吐司喜释吐司喜释</div>
										<div class="price">￥168.00</div>
										<span class="cart"></span>
									</div>
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<div id="side-list" class="seller-wrap-side-list">
			<div class="mask"></div>
			<div class="list-wrap">
				<dl class="list-item first">
					<dt class="title">全部</dt>
				</dl>
				<dl class="list-item">
					<dt class="title">饼干类</dt>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
				</dl>
				<dl class="list-item">
					<dt class="title">饼干类</dt>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
				</dl>
				<dl class="list-item">
					<dt class="title">饼干类</dt>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
				</dl>
				<dl class="list-item">
					<dt class="title">饼干类</dt>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
				</dl>
				<dl class="list-item">
					<dt class="title">饼干类</dt>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
				</dl>
				<dl class="list-item">
					<dt class="title">饼干类</dt>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
					<dd class="item">椰子饼</dd>
				</dl>
			</div>
		</div>
		<div id="proDetailModal" class="pro-detail-modal-wrapper hide">
			<div class="mask close-hook"></div>
			<div class="container">
				<div class="header">
					<div class="img-wrap">
						<img class="img" src="../../img/replace/shop_img.png" />
					</div>
					<div class="text">
						<p class="price">¥ 168.00</p>
						<p class="desc">已选：<span id="sel-type"></span></p>
					</div>
					<i class="close iconfont icon-cancel- close-hook"></i>
				</div>
				<div class="content">
					<ul class="list">
						<li class="item item-hook active">原味原味原味</li>
						<li class="item item-hook">微辣</li>
						<li class="item item-hook">微辣</li>
						<li class="item item-hook">微辣</li>
						<li class="item item-hook">微辣</li>
						<li class="item item-hook">微辣</li>
					</ul>
					<div class="number">
						<span class="text">数量</span>
						<div class="count-wrap">
							<div class="minus button disabled">
								<span class="minus iconfont icon-reduce-"></span>
							</div>
							<span id="count" class="count">1</span>
							<div class="add button">
								<span class="iconfont icon-plus-"></span>
							</div>
						</div>
					</div>
				</div>
				<a id="addCart" href="javascript:;" class="btn btn-primary add-cart">加入购物车</a>
			</div>
		</div>

		<script type="text/javascript" data-main="../../js/app" src="../../js/require.js"></script>
		<script type="text/javascript" src="../../js/app.js"></script>
		<script type="text/javascript">
			requirejs(['jquery', 'lazyload', 'rem', 'tools'],
				function($, lazyload, rem, t) {
					var $sideBtn = $('#side-icon'), //触发侧栏动画按钮
						$sideList = $('#side-list'), //侧栏dom
						$proDetailModal = $('#proDetailModal'), //商品详情dom
						$selType = $('#sel-type'), //显示已选择类型dom
						$count = $('#count'),
						$addCart = $('#addCart'),
						sideModal = t.showModal('#side-list', 'enter', 'leave'), //侧栏动画对象
						proModal = t.showModal('#proDetailModal', 'move-enter', 'move-leave'); //底部动画对象
					t.lazyload('.page');

					$sideBtn.click(sideModal.show);
					$sideList.find('.mask').click(sideModal.hide);

					$addCart.click(function() {
						//点击加入购物车
						//！真实请求请把最后一个参数去掉
						t.post('', {}, function() {
							t.toast('添加成功!');
						}, true, true)
					})

					//商品属性选择事件
					$proDetailModal.delegate('.item-hook', 'click', function() {
						var $this = $(this),
							selText = $this.text();
						$this.addClass('active').siblings().removeClass('active');
						$selType.text(selText);
					})
					// 商品 + - 
					$proDetailModal.delegate('.count-wrap .button', 'click', function() {
						var $this = $(this);
						if($this.hasClass('disabled')) return;
						var n = $count.text();
						$this.hasClass('add') && add();
						$this.hasClass('minus') && minus();

						//点击 + 进行操作
						function add() {
							n++;
							$this.prev().text(n).prev().removeClass('disabled');
						}

						//点击 - 进行操作
						function minus() {
							n--;

							//-号判断是否小于1
							n = Math.max(1, n);
							n == 1 && $this.addClass('disabled');
							$this.next().text(n);
						}
					})

					$proDetailModal.find('.close-hook').click(proModal.hide);

					$('#proList').delegate('.cart', 'click', function() {
						//这里进行其他操作
						//这里获取商品id ,到时把注释打开
						//var $id = $(this).parents('.item-wrap')[0].id;
						proModal.show();
					})
					
					$('.sort-nav').delegate('.item', 'click', function () {
						var $this = $(this);
						if ($this.hasClass('active')) return;
						$this.addClass('active').siblings().removeClass('active');
					});
				});
		</script>
	</body>

</html>